extends ../layout

block content
  .content
    .container-fluid
      .row
        .col-lg-4.col-md-5
          .card.card-user
            .image
              img(src='assets/img/background.jpg', alt='...')
            .content
              .author
                if user.profile.picture
                  img.avatar.border-white(src=user.profile.picture) 
                else
                  img.avatar.border-white(src=user.gravatar(100))
                h4.title
                  = user.profile.name || user.email || user.id
                  br
                  if user.company.url
                    a(href='http://'+user.company.url) 
                      small ##{user.company.title}
              p.description.text-center
                | #{user.company.address.region}
                br
                | #{user.company.address.city}
                br
                | #{user.company.address.street}

              form(action='/account/delete', method='POST')
                .text-center
                  input(type='hidden', name='_csrf', value=_csrf)
                  em.small 
                    | После нажатия на эту кнопку, Ваш аккаунт будет удален безвозвратно. Будьте внимательны и аккуратны
                  button.btn.btn-danger(type='submit')
                    i.fa.fa-trash
                    | Удалить мой аккаунт
                

            hr
            .text-center
              .row
                .col-md-3.col-md-offset-1
                  h5
                    | 12
                    br
                    small Files
                .col-md-4
                  h5
                    | 2GB
                    br
                    small Used
                .col-md-3
                  h5
                    | 24,6$
                    br
                    small Spent


          .card
            .header
              h4.title Аккаунты соц. сетей
            .content
              form
                .row
                  .col-md-12
                    if user.vkontakte
                      a.btn.btn-danger.btn-block.btn-vk.btn-social(href='/account/unlink/vkontakte') 
                        i.fa.fa-minus
                        i.fa.fa-vk
                    else
                      a.btn.btn-primary.btn-block.btn-vk.btn-social(href='/auth/vkontakte') 
                        i.fa.fa-plus
                        i.fa.fa-vk
                    if user.instagram
                      a.btn.btn-danger.btn-block.btn-vk.btn-social(href='/account/unlink/instagram')
                        i.fa.fa-minus
                        i.fa.fa-instagram
                    else
                      a.btn.btn-primary.btn-block.btn-vk.btn-social(href='/auth/instagram')
                        i.fa.fa-plus
                        i.fa.fa-instagram
                    if user.google
                      a.btn.btn-danger.btn-block.btn-vk.btn-social(href='/account/unlink/google')
                        i.fa.fa-minus
                        i.fa.fa-google
                    else
                      a.btn.btn-primary.btn-block.btn-vk.btn-social(href='/auth/google')
                        i.fa.fa-plus
                        i.fa.fa-google
                    if user.facebook
                      a.btn.btn-danger.btn-block.btn-vk.btn-social(href='/account/unlink/facebook')
                        i.fa.fa-minus
                        i.fa.fa-facebook
                    else
                      a.btn.btn-primary.btn-block.btn-vk.btn-social(href='/auth/facebook')
                        i.fa.fa-plus
                        i.fa.fa-facebook
                    if user.twitter
                      a.btn.btn-danger.btn-block.btn-vk.btn-social(href='/account/unlink/twitter')
                        i.fa.fa-minus
                        i.fa.fa-twitter
                    else
                      a.btn.btn-primary.btn-block.btn-vk.btn-social(href='/auth/twitter')
                        i.fa.fa-plus
                        i.fa.fa-twitter
                    if user.github
                      a.btn.btn-danger.btn-block.btn-vk.btn-social(href='/account/unlink/github')
                        i.fa.fa-minus
                        i.fa.fa-github
                    else
                      a.btn.btn-primary.btn-block.btn-vk.btn-social(href='/auth/github')
                        i.fa.fa-plus
                        i.fa.fa-github
                    if user.linkedin
                      a.btn.btn-danger.btn-block.btn-vk.btn-social(href='/account/unlink/linkedin')
                        i.fa.fa-minus
                        i.fa.fa-linkedin
                    else
                      a.btn.btn-primary.btn-block.btn-vk.btn-social(href='/auth/linkedin')
                        i.fa.fa-plus
                        i.fa.fa-linkedin


        .col-lg-8.col-md-7
          .card
            .header
              h4.title #{title}
            .content
              form(action='/account/profile', method='POST')
                input(type='hidden', name='_csrf', value=_csrf)
                .row
                  .col-md-6
                    .form-group
                      label(for='email') Email address
                      input.form-control.border-input(type='email', name='email', id='email', value=user.email)
                  .col-md-6
                    .form-group
                      label(for='name') Имя
                      input.form-control.border-input(type='text', name='name', id='name', value=user.profile.name)
                .row
                  .col-md-12
                    .form-group
                      label(for='gender') Пол 
                      br
                      .btn-group#gender(data-toggle='buttons')
                        label.btn.btn-info(aria-pressed='true', class=(user.profile.gender=='male'?'active':null))
                          input#option1(type='radio', checked=user.profile.gender=='male', name='gender', value='male')
                          | Муж.

                        label.btn.btn-info(aria-pressed='true', class=(user.profile.gender=='female'?'active':null))
                          input#option2(type='radio', checked=user.profile.gender=='female', name='gender', value='female')
                          | Жен.

                        label.btn.btn-info(aria-pressed='true', class=(user.profile.gender=='other'?'active':null))
                          input#option3(type='radio', checked=user.profile.gender=='other', name='gender', value='other')
                          | Другой
                .text-center
                  button.btn.btn-info.btn-fill.btn-wd(type='submit') Update Profile
          .card
            .header
              h4.title Изменить пароль
            .content
              form(action='/account/password', method='POST')
                input(type='hidden', name='_csrf', value=_csrf)
                .row
                  .col-md-12
                    .form-group
                      label(for='password') Новый пароль
                      input.form-control.border-input(type='password', name='password', id='password')
                .row
                  .col-md-12
                    .form-group
                      label(for='confirmPassword') Подтвердить пароль
                      input.form-control.border-input(type='password', name='confirmPassword', id='confirmPassword')
                .text-center
                  button.btn.btn-info.btn-fill.btn-wd(type='submit')
                    i.fa.fa-lock
                    | Изменить пароль
          .card
            .header
              h4.title Конвертация профиля
            .content
              if !user.company
                .text-center
                  a.btn.btn-info.btn-fill.btn-wd(href='/convert', name='convert', id='convert') 
                    i.fa.fa-refresh
                    | Конвертировать
              else 
                .row
                  .col-md-7
                    .form-group
                      label(for='company-name') Имя компании
                      input.form-control.border-input(type='text', id='company-name', name='title', placeholder='Имя компании', value=user.company.title)
                  .col-md-5
                    .form-group
                      label(for='company-slug') Слаг(slug)
                      input.form-control.border-input(type='text', id='company-slug', name='slug', placeholder='Короткое имя компании(только англ.)', value=user.company.slug)
                .row
                  .col-md-12
                    .form-group
                      label(for='company-decription') Описание компании
                      textarea.form-control.border-input(rows='5', id='company-decription', name='description', placeholder='Описание компании') #{user.company.description}
                .row
                  .col-md-12
                    .form-group
                      label(for='company-address-street') Адрес
                      input.form-control.border-input(type='text', id='company-address-street', name='addressStreet', placeholder='Адрес', value=user.company.address.street)
                .row
                  .col-md-6
                    .form-group
                      label(for='company-address-region') Регион
                      input.form-control.border-input(type='text', id='company-address-region', name='addressRegion', placeholder='Регион', value=user.company.address.region)
                  .col-md-6
                    .form-group
                      label(for='company-address-city') Город
                      input.form-control.border-input(type='text', id='company-address-city', name='addressCity', placeholder='Город', value=user.company.address.city)
                
                .clearfix

